<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1j1m9c3" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.12.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.15.0">
  <bpmn:collaboration id="Collaboration_16qafuh">
    <bpmn:participant id="Participant_12zbopj" name="Kunde" />
    <bpmn:participant id="Participant_1cinbjq" name="Reisebüro" processRef="Process_01i5px3" />
    <bpmn:messageFlow id="Flow_03ohyty" sourceRef="Activity_01fl3cl" targetRef="Participant_12zbopj" />
    <bpmn:messageFlow id="Flow_0148uu4" sourceRef="Participant_12zbopj" targetRef="Event_0sfdkmy" />
    <bpmn:messageFlow id="Flow_1juqhcc" sourceRef="zimmerVorschlagen" targetRef="Participant_12zbopj" />
  </bpmn:collaboration>
  <bpmn:process id="Process_01i5px3" isExecutable="true">
    <bpmn:laneSet id="LaneSet_0uc9q65">
      <bpmn:lane id="Lane_17n5dp4" name="Filialleitung" />
      <bpmn:lane id="Lane_0yj7lbc" name="Servicemitarbeiter">
        <bpmn:flowNodeRef>Activity_01fl3cl</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0sfdkmy</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1imzwfz</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>boniPruefen</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_1mg1ygy</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>modalVorschlagen</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_19qco6d</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0hbkwwd</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0cj9elw</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>buchungAnzeigen</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>zahlungsartWaehlen</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_13viwg1</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1q9rfkl" name="System">
        <bpmn:flowNodeRef>Gateway_1sbh7j6</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>checkSingle</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>checkDouble</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>checkSuite</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0hxevlc</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0vb6k4w</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>zimmerVorschlagen</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>zimmerEintragen</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>zimmerBuchen</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1d0q11l</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1gpz2j8</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0oi01fx</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>kondi3Monate</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>kondi6Monate</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1qbv6rm</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1ibrc83</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:sequenceFlow id="Flow_133e066" sourceRef="zahlungsartWaehlen" targetRef="Gateway_1d0q11l" />
    <bpmn:sequenceFlow id="Flow_1nc2a0n" sourceRef="Event_0hbkwwd" targetRef="Activity_0cj9elw" />
    <bpmn:sequenceFlow id="Flow_1tc93vx" sourceRef="Activity_19qco6d" targetRef="Activity_1ibrc83" />
    <bpmn:sequenceFlow id="Flow_0olu7ki" name="3 Monate" sourceRef="Gateway_0oi01fx" targetRef="kondi3Monate">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${modality == 'three'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1dtqh8j" name="6 Monate" sourceRef="Gateway_0oi01fx" targetRef="kondi6Monate">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${modality == 'six'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_015vqai" sourceRef="modalVorschlagen" targetRef="Gateway_0oi01fx" />
    <bpmn:sequenceFlow id="Flow_0lkkwra" sourceRef="Gateway_1gpz2j8" targetRef="Activity_19qco6d" />
    <bpmn:sequenceFlow id="Flow_1rsacmn" sourceRef="kondi3Monate" targetRef="Gateway_1gpz2j8" />
    <bpmn:sequenceFlow id="Flow_1w2zpnv" sourceRef="kondi6Monate" targetRef="Gateway_1gpz2j8" />
    <bpmn:sequenceFlow id="Flow_03c1k8r" sourceRef="Event_13viwg1" targetRef="Event_1mg1ygy" />
    <bpmn:sequenceFlow id="Flow_08nkpzh" sourceRef="boniPruefen" targetRef="modalVorschlagen" />
    <bpmn:sequenceFlow id="Flow_16o4913" name="Rechnung" sourceRef="Gateway_1d0q11l" targetRef="Activity_1qbv6rm">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${payment == 'invoice'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0cb9vyn" name="Raten-&#10;zahlung" sourceRef="Gateway_1d0q11l" targetRef="boniPruefen">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${payment == 'installment'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1qsrhx6" sourceRef="Gateway_1imzwfz" targetRef="Event_0hbkwwd" />
    <bpmn:sequenceFlow id="Flow_15lxvrs" sourceRef="Activity_1ibrc83" targetRef="Gateway_1imzwfz" />
    <bpmn:sequenceFlow id="Flow_01nbyc0" sourceRef="Activity_1qbv6rm" targetRef="Gateway_1imzwfz" />
    <bpmn:sequenceFlow id="Flow_0n1sh5q" sourceRef="Activity_01fl3cl" targetRef="Gateway_1sbh7j6" />
    <bpmn:sequenceFlow id="Flow_1dimczj" sourceRef="Event_0sfdkmy" targetRef="Activity_01fl3cl" />
    <bpmn:sequenceFlow id="Flow_1b50max" name="Doppelzimmer" sourceRef="Gateway_1sbh7j6" targetRef="checkDouble">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${wish == 'double'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1oyq1u7" name="Einzelzimmer" sourceRef="Gateway_1sbh7j6" targetRef="checkSingle">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${wish == 'single'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0dghspt" name="Suite" sourceRef="Gateway_1sbh7j6" targetRef="checkSuite">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${wish == 'suite'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_11hhqwk" sourceRef="checkSuite" targetRef="Gateway_0hxevlc" />
    <bpmn:sequenceFlow id="Flow_1yyerc3" sourceRef="checkDouble" targetRef="Gateway_0hxevlc" />
    <bpmn:sequenceFlow id="Flow_175mvjm" sourceRef="checkSingle" targetRef="Gateway_0hxevlc" />
    <bpmn:sequenceFlow id="Flow_0r7c10e" sourceRef="zimmerBuchen" targetRef="buchungAnzeigen" />
    <bpmn:sequenceFlow id="Flow_17v3guw" name="nein" sourceRef="Gateway_0vb6k4w" targetRef="Activity_01fl3cl">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!acceptRoom}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0nnct5l" sourceRef="Gateway_0hxevlc" targetRef="zimmerVorschlagen" />
    <bpmn:sequenceFlow id="Flow_15p2kug" name="ja" sourceRef="Gateway_0vb6k4w" targetRef="zimmerEintragen">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${acceptRoom}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_00z5rn8" sourceRef="zimmerEintragen" targetRef="zimmerBuchen" />
    <bpmn:sequenceFlow id="Flow_0x2llx7" sourceRef="zimmerVorschlagen" targetRef="Gateway_0vb6k4w" />
    <bpmn:sequenceFlow id="Flow_1dpt5ed" sourceRef="buchungAnzeigen" targetRef="zahlungsartWaehlen" />
    <bpmn:boundaryEvent id="Event_13viwg1" name="Ablehnung" attachedToRef="boniPruefen">
      <bpmn:extensionElements>
        <camunda:executionListener expression="${credit == &#39;negative&#39;}" event="start" />
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_03c1k8r</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0gksgcr" errorRef="Error_11ron9w" camunda:errorCodeVariable="creditworthiness" camunda:errorMessageVariable="deniedPayment" />
    </bpmn:boundaryEvent>
    <bpmn:userTask id="zahlungsartWaehlen" name="Zahlungsart wählen" camunda:assignee="demo">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="payment" label="Wie möchte der Kunde zahlen?" type="enum">
            <camunda:value id="installment" name="Ratenzahlung" />
            <camunda:value id="invoice" name="Rechnung" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1dpt5ed</bpmn:incoming>
      <bpmn:outgoing>Flow_133e066</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="buchungAnzeigen" name="Buchungs-übersicht anzeigen" camunda:assignee="demo">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="name" label="Name" type="string" defaultValue="${guestName}" />
          <camunda:formField id="type" label="Ihr gewünschtes Zimmer:" type="string" defaultValue="${type}" />
          <camunda:formField id="roomnr" label="Zimmernummer:" type="long" defaultValue="${roomnr}" />
          <camunda:formField id="stayDuration" label="Ihre Aufenthaltsdauer" type="long" defaultValue="${duration}" />
          <camunda:formField id="roomPrice" label="Gesamtpreis: " type="long" defaultValue="${price}" />
          <camunda:formField id="roomStatus" label="Status des Zimmers:" type="string" defaultValue="${roomstatus}" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0r7c10e</bpmn:incoming>
      <bpmn:outgoing>Flow_1dpt5ed</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:task id="Activity_1ibrc83" name="Ratenzahlung genehmigen">
      <bpmn:incoming>Flow_1tc93vx</bpmn:incoming>
      <bpmn:outgoing>Flow_15lxvrs</bpmn:outgoing>
    </bpmn:task>
    <bpmn:scriptTask id="Activity_1qbv6rm" name="Rechnung ausstellen" scriptFormat="javascript">
      <bpmn:incoming>Flow_16o4913</bpmn:incoming>
      <bpmn:outgoing>Flow_01nbyc0</bpmn:outgoing>
      <bpmn:script>var System = Java.type("java.lang.System");
var URL = Java.type("java.net.URL");
var BufferedReader = Java.type("java.io.BufferedReader");
var InputStreamReader = Java.type("java.io.InputStreamReader");
var OutputStream = Java.type("java.io.OutputStream");
var PrintWriter = Java.type("java.io.PrintWriter");
var Collectors = Java.type("java.util.stream.Collectors");

var roomid = execution.getVariable("room")
var guestName = execution.getVariable("name")


var url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/" + roomid);

var con = url.openConnection();
con.setRequestMethod("GET");
con.setDoOutput(true);
con.setRequestProperty("Content-Type", "application/json");
con.setRequestProperty("Accept", "application/json");
con.connect()


var receipt = { guest : "name", roomtype: "type", price : "roomPrice"}

var jsoncontent = JSON.stringify(content);

var os = con.getOutputStream();
var ps = new PrintWriter(os);

System.out.println(jsoncontent.toString());

ps.println(jsoncontent.toString());

ps.flush();

ps.close();

reader = new BufferedReader(new 
  InputStreamReader(con.getInputStream()));
  
  reader.close();
</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_0cj9elw" name="Buchungs-bestätigung aushändigen">
      <bpmn:incoming>Flow_1nc2a0n</bpmn:incoming>
    </bpmn:userTask>
    <bpmn:intermediateCatchEvent id="Event_0hbkwwd" name="Zahlung eingegangen">
      <bpmn:incoming>Flow_1qsrhx6</bpmn:incoming>
      <bpmn:outgoing>Flow_1nc2a0n</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_19rz8gi">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT1S </bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:userTask id="Activity_19qco6d" name="Neue Buchungsübersicht anzeigen">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="totalPrice" label="Neuer Gesamtpreis (inkl. 1,2% Zinsen):" type="string" />
          <camunda:formField id="monthlyPrice" label="Monatlich zu zahlen:" type="string" />
          <camunda:formField id="confirm" label="Ratenzahlung bestätigen" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0lkkwra</bpmn:incoming>
      <bpmn:outgoing>Flow_1tc93vx</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="kondi6Monate" name="Kondition für 6 Monate ermitteln" scriptFormat="javascript">
      <bpmn:incoming>Flow_1dtqh8j</bpmn:incoming>
      <bpmn:outgoing>Flow_1w2zpnv</bpmn:outgoing>
      <bpmn:script>var System = Java.type("java.lang.System");
var URL = Java.type("java.net.URL");
var BufferedReader = Java.type("java.io.BufferedReader");
var InputStreamReader = Java.type("java.io.InputStreamReader");
var Collectors = Java.type("java.util.stream.Collectors");

var roomid = execution.getVariable("room")

var url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/" + roomid);

  con = url.openConnection();
  con.setRequestMethod("GET");
  con.connect()

  reader = new BufferedReader(new 
  InputStreamReader(con.getInputStream()));
  jsonstring = reader.lines().collect(Collectors.joining("\n"));
  reader.close()
  System.out.println("Room: " + jsonstring)
  var roomobj = JSON.parse(jsonstring);


var installtotal = ((duration * roomobj.price)*1,2)

var installmentmonthly = installtotal/6


execution.setVariable("guestName", roomobj.guest)
execution.setVariable("type", roomobj.roomtype)
execution.setVariable("roomnr", roomnr)
execution.setVariable("duration", duration)

execution.setVariable("totalPrice", roomobj.installment)
execution.setVariable("monthlyPrice", roomobj.installmentmonthly)
</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="kondi3Monate" name="Kondition für 3 Monate ermitteln" scriptFormat="javascript">
      <bpmn:incoming>Flow_0olu7ki</bpmn:incoming>
      <bpmn:outgoing>Flow_1rsacmn</bpmn:outgoing>
      <bpmn:script>var System = Java.type("java.lang.System");
var URL = Java.type("java.net.URL");
var BufferedReader = Java.type("java.io.BufferedReader");
var InputStreamReader = Java.type("java.io.InputStreamReader");
var Collectors = Java.type("java.util.stream.Collectors");

var roomid = execution.getVariable("room")

var url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/" + roomid);

  con = url.openConnection();
  con.setRequestMethod("GET");
  con.connect()

  reader = new BufferedReader(new 
  InputStreamReader(con.getInputStream()));
  jsonstring = reader.lines().collect(Collectors.joining("\n"));
  reader.close()
  System.out.println("Room: " + jsonstring)
  var roomobj = JSON.parse(jsonstring);


var installtotal = ((duration * roomobj.price)*1,2)

var installmentmonthly = installtotal/3


execution.setVariable("guestName", roomobj.guest)
execution.setVariable("type", roomobj.roomtype)
execution.setVariable("roomnr", roomnr)
execution.setVariable("duration", duration)

execution.setVariable("totalPrice", roomobj.installment)
execution.setVariable("monthlyPrice", roomobj.installmentmonthly)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="modalVorschlagen" name="Modalitäten vorschlagen" camunda:assignee="demo">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="modality" type="enum">
            <camunda:value id="three" name="3 Monate" />
            <camunda:value id="six" name="6 Monate" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_08nkpzh</bpmn:incoming>
      <bpmn:outgoing>Flow_015vqai</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_0oi01fx">
      <bpmn:incoming>Flow_015vqai</bpmn:incoming>
      <bpmn:outgoing>Flow_1dtqh8j</bpmn:outgoing>
      <bpmn:outgoing>Flow_0olu7ki</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_1gpz2j8">
      <bpmn:incoming>Flow_1w2zpnv</bpmn:incoming>
      <bpmn:incoming>Flow_1rsacmn</bpmn:incoming>
      <bpmn:outgoing>Flow_0lkkwra</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_1mg1ygy" name="Buchung abgebrochen">
      <bpmn:incoming>Flow_03c1k8r</bpmn:incoming>
      <bpmn:terminateEventDefinition id="TerminateEventDefinition_0fuwqsb" />
    </bpmn:endEvent>
    <bpmn:userTask id="boniPruefen" name="Bonitätsprüfung durchführen" camunda:assignee="demo">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="credit" label="Ergebnis der Bonitätsprüfung?" type="enum">
            <camunda:value id="positive" name="Positiv - Ratenzahlung möglich" />
            <camunda:value id="negative" name="Negativ - Ratenzahlung abgelehnt" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0cb9vyn</bpmn:incoming>
      <bpmn:outgoing>Flow_08nkpzh</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_1d0q11l">
      <bpmn:incoming>Flow_133e066</bpmn:incoming>
      <bpmn:outgoing>Flow_0cb9vyn</bpmn:outgoing>
      <bpmn:outgoing>Flow_16o4913</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_1imzwfz">
      <bpmn:incoming>Flow_01nbyc0</bpmn:incoming>
      <bpmn:incoming>Flow_15lxvrs</bpmn:incoming>
      <bpmn:outgoing>Flow_1qsrhx6</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:scriptTask id="zimmerBuchen" name="Zimmerdetails genieren" scriptFormat="javascript">
      <bpmn:incoming>Flow_00z5rn8</bpmn:incoming>
      <bpmn:outgoing>Flow_0r7c10e</bpmn:outgoing>
      <bpmn:script>var System = Java.type("java.lang.System");
var URL = Java.type("java.net.URL");
var BufferedReader = Java.type("java.io.BufferedReader");
var InputStreamReader = Java.type("java.io.InputStreamReader");
var Collectors = Java.type("java.util.stream.Collectors");

var roomid = execution.getVariable("room")
var duration = execution.getVariable("duration")

var url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/" + roomid);

  con = url.openConnection();
  con.setRequestMethod("GET");
  con.connect()

  reader = new BufferedReader(new 
  InputStreamReader(con.getInputStream()));
  jsonstring = reader.lines().collect(Collectors.joining("\n"));
  reader.close()
  System.out.println("Room: " + jsonstring)
  var roomobj = JSON.parse(jsonstring);

var roomprice = duration * roomobj.price

execution.setVariable("guestName", roomobj.guest)
execution.setVariable("type", roomobj.roomtype)
execution.setVariable("roomnr", roomid)
execution.setVariable("duration", duration)
execution.setVariable("price", roomprice)
execution.setVariable("roomstatus", roomobj.status)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="zimmerEintragen" name="Zimmer eintragen" scriptFormat="javascript">
      <bpmn:incoming>Flow_15p2kug</bpmn:incoming>
      <bpmn:outgoing>Flow_00z5rn8</bpmn:outgoing>
      <bpmn:script>var System = Java.type("java.lang.System");
var URL = Java.type("java.net.URL");
var BufferedReader = Java.type("java.io.BufferedReader");
var InputStreamReader = Java.type("java.io.InputStreamReader");
var OutputStream = Java.type("java.io.OutputStream");
var OutputStreamWriter = Java.type("java.io.OutputStreamWriter");
var PrintWriter = Java.type("java.io.PrintWriter");
var Collectors = Java.type("java.util.stream.Collectors");

var roomid = execution.getVariable("room")
var guestName = execution.getVariable("guestName")
var duration = execution.getVariable("duration")


var url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/" + roomid);

var con = url.openConnection();
con.setRequestMethod("PUT");
con.setDoOutput(true);
con.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
con.setRequestProperty("Accept", "application/json");
con.connect()

var content = {status : "occupied", guest : guestName, duration : duration }

var jsoncontent = JSON.stringify(content);

var os = con.getOutputStream();
var ps = new PrintWriter(os);

System.out.println(jsoncontent.toString());

ps.println(jsoncontent.toString());

ps.flush();

ps.close();

var out = new OutputStreamWriter(con.getOutputStream());
out.write(jsoncontent);
  out.close();</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="zimmerVorschlagen" name="Zimmer vorschlagen" camunda:assignee="demo">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="acceptRoom" label="Zimmervorschlag annehmen?" type="boolean" />
          <camunda:formField id="suggestedRoom" label="Freies Zimmer" type="string" defaultValue="${room}" />
          <camunda:formField id="guestWish" label="Ihr Wunsch" type="string" defaultValue="${wish}" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0nnct5l</bpmn:incoming>
      <bpmn:outgoing>Flow_0x2llx7</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_0vb6k4w" name="Vorschlag angenommen?">
      <bpmn:incoming>Flow_0x2llx7</bpmn:incoming>
      <bpmn:outgoing>Flow_15p2kug</bpmn:outgoing>
      <bpmn:outgoing>Flow_17v3guw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_0hxevlc">
      <bpmn:incoming>Flow_11hhqwk</bpmn:incoming>
      <bpmn:incoming>Flow_1yyerc3</bpmn:incoming>
      <bpmn:incoming>Flow_175mvjm</bpmn:incoming>
      <bpmn:outgoing>Flow_0nnct5l</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:scriptTask id="checkSuite" name="Verfügbarkeit Suite prüfen" scriptFormat="javascript">
      <bpmn:incoming>Flow_0dghspt</bpmn:incoming>
      <bpmn:outgoing>Flow_11hhqwk</bpmn:outgoing>
      <bpmn:script>var System = Java.type("java.lang.System");
var URL = Java.type("java.net.URL");
var BufferedReader = Java.type("java.io.BufferedReader");
var InputStreamReader = Java.type("java.io.InputStreamReader");
var Collectors = Java.type("java.util.stream.Collectors");

var url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/")

var con = url.openConnection();
con.setRequestMethod("GET");
con.connect()

var reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
var jsonstring = reader.lines().collect(Collectors.joining("\n"));
reader.close()
var resobj = JSON.parse(jsonstring);

for (var roomid of resobj) {
  url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/" + 
  roomid)

  con = url.openConnection();
  con.setRequestMethod("GET");
  con.connect()

  reader = new BufferedReader(new 
  InputStreamReader(con.getInputStream()));
  jsonstring = reader.lines().collect(Collectors.joining("\n"));
  reader.close()
  var roomobj = JSON.parse(jsonstring);

  if (roomobj.roomtype === "suite" &amp;&amp; roomobj.status === "free") 
  {break}
}

execution.setVariable("room", roomid)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="checkDouble" name="Verfügbarkeit Doppelzimmer prüfen" scriptFormat="javascript">
      <bpmn:incoming>Flow_1b50max</bpmn:incoming>
      <bpmn:outgoing>Flow_1yyerc3</bpmn:outgoing>
      <bpmn:script>var System = Java.type("java.lang.System");
var URL = Java.type("java.net.URL");
var BufferedReader = Java.type("java.io.BufferedReader");
var InputStreamReader = Java.type("java.io.InputStreamReader");
var Collectors = Java.type("java.util.stream.Collectors");

var url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/")

var con = url.openConnection();
con.setRequestMethod("GET");
con.connect()

var reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
var jsonstring = reader.lines().collect(Collectors.joining("\n"));
reader.close()
var resobj = JSON.parse(jsonstring);
console.log(resobj);
for (var roomid of resobj) {
  url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/" + 
  roomid)

  con = url.openConnection();
  con.setRequestMethod("GET");
  con.connect()

  reader = new BufferedReader(new 
  InputStreamReader(con.getInputStream()));
  jsonstring = reader.lines().collect(Collectors.joining("\n"));
  reader.close()
  var roomobj = JSON.parse(jsonstring);

  if (roomobj.roomtype === "double" &amp;&amp; roomobj.status === "free") 
  {break}
}

execution.setVariable("room", roomid)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="checkSingle" name="Verfügbarkeit Einzelzimmer prüfen" scriptFormat="javascript">
      <bpmn:incoming>Flow_1oyq1u7</bpmn:incoming>
      <bpmn:outgoing>Flow_175mvjm</bpmn:outgoing>
      <bpmn:script>var System = Java.type("java.lang.System");
var URL = Java.type("java.net.URL");
var BufferedReader = Java.type("java.io.BufferedReader");
var InputStreamReader = Java.type("java.io.InputStreamReader");
var Collectors = Java.type("java.util.stream.Collectors");

var url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/")

var con = url.openConnection();
con.setRequestMethod("GET");
con.connect()

var reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
var jsonstring = reader.lines().collect(Collectors.joining("\n"));
reader.close()
var resobj = JSON.parse(jsonstring);

for (var roomid of resobj) {
  url = new URL("http://35.195.103.37:8080/hotels/berlin/rooms/" + 
  roomid)

  con = url.openConnection();
  con.setRequestMethod("GET");
  con.connect()

  reader = new BufferedReader(new 
  InputStreamReader(con.getInputStream()));
  jsonstring = reader.lines().collect(Collectors.joining("\n"));
  reader.close()
  var roomobj = JSON.parse(jsonstring);

  if (roomobj.roomtype === "single" &amp;&amp; roomobj.status === "free") 
  {break}
}

execution.setVariable("room", roomid)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="Gateway_1sbh7j6">
      <bpmn:incoming>Flow_0n1sh5q</bpmn:incoming>
      <bpmn:outgoing>Flow_1b50max</bpmn:outgoing>
      <bpmn:outgoing>Flow_1oyq1u7</bpmn:outgoing>
      <bpmn:outgoing>Flow_0dghspt</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:startEvent id="Event_0sfdkmy" name="Buchungswunsch liegt vor">
      <bpmn:outgoing>Flow_1dimczj</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Activity_01fl3cl" name="Kunde nach Zimmerwunsch fragen" camunda:formKey="camunda-forms:deployment:Zimmerauswahl.form" camunda:assignee="demo">
      <bpmn:extensionElements />
      <bpmn:incoming>Flow_1dimczj</bpmn:incoming>
      <bpmn:incoming>Flow_17v3guw</bpmn:incoming>
      <bpmn:outgoing>Flow_0n1sh5q</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:association id="Association_1g4loql" sourceRef="TextAnnotation_1gvhiwv" targetRef="Event_13viwg1" />
    <bpmn:textAnnotation id="TextAnnotation_1gvhiwv">
      <bpmn:text>geht einfach weiter - ÄNDERN!</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1ny3o93" sourceRef="checkSingle" targetRef="TextAnnotation_0qdbuja" />
    <bpmn:textAnnotation id="TextAnnotation_0qdbuja">
      <bpmn:text>könnten theoretisch noch einbauen: Loop, wenn Zimmer nicht verfügbar</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:textAnnotation id="TextAnnotation_0el8i3v">
      <bpmn:text>schauen, welches wunschzimmer frei ist</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_17w1wpw" sourceRef="Activity_1ibrc83" targetRef="TextAnnotation_0iox44l" />
    <bpmn:textAnnotation id="TextAnnotation_0iox44l">
      <bpmn:text>PUT der veränderten Variable bzgl. Ratenzahlung</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1596pi2" sourceRef="kondi6Monate" targetRef="TextAnnotation_04ob12u" />
    <bpmn:textAnnotation id="TextAnnotation_04ob12u">
      <bpmn:text>hier müssten wir den gesamtpreis nehmen und dann durch 6 + Zinsen? :D dann brauchen wir eine neue Variable: newPrice? oder überschreiben wir einfach price?</bpmn:text>
    </bpmn:textAnnotation>
  </bpmn:process>
  <bpmn:error id="Error_11ron9w" name="Error_Bonität" errorCode="01" camunda:errorMessage="Bonität abgelehnt" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_16qafuh">
      <bpmndi:BPMNShape id="Participant_12zbopj_di" bpmnElement="Participant_12zbopj" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="2650" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_1cinbjq_di" bpmnElement="Participant_1cinbjq" isHorizontal="true">
        <dc:Bounds x="145" y="222" width="3520" height="988" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1q9rfkl_di" bpmnElement="Lane_1q9rfkl" isHorizontal="true">
        <dc:Bounds x="175" y="267" width="3490" height="405" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0yj7lbc_di" bpmnElement="Lane_0yj7lbc" isHorizontal="true">
        <dc:Bounds x="175" y="672" width="3490" height="298" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_17n5dp4_di" bpmnElement="Lane_17n5dp4" isHorizontal="true">
        <dc:Bounds x="175" y="970" width="3490" height="240" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_04ob12u_di" bpmnElement="TextAnnotation_04ob12u">
        <dc:Bounds x="2475" y="690" width="160" height="110" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0iox44l_di" bpmnElement="TextAnnotation_0iox44l">
        <dc:Bounds x="3115" y="370" width="100" height="67" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0el8i3v_di" bpmnElement="TextAnnotation_0el8i3v">
        <dc:Bounds x="465" y="390" width="100" height="67" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0qdbuja_di" bpmnElement="TextAnnotation_0qdbuja">
        <dc:Bounds x="845" y="270" width="100" height="95" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1gvhiwv_di" bpmnElement="TextAnnotation_1gvhiwv">
        <dc:Bounds x="2290" y="1020" width="99.99715391621127" height="52.82331511839708" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1dpt5ed_di" bpmnElement="Flow_1dpt5ed">
        <di:waypoint x="1740" y="730" />
        <di:waypoint x="1810" y="730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0x2llx7_di" bpmnElement="Flow_0x2llx7">
        <di:waypoint x="1145" y="500" />
        <di:waypoint x="1190" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00z5rn8_di" bpmnElement="Flow_00z5rn8">
        <di:waypoint x="1425" y="500" />
        <di:waypoint x="1495" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15p2kug_di" bpmnElement="Flow_15p2kug">
        <di:waypoint x="1240" y="500" />
        <di:waypoint x="1325" y="500" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1279" y="482" width="8" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0nnct5l_di" bpmnElement="Flow_0nnct5l">
        <di:waypoint x="980" y="500" />
        <di:waypoint x="1045" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17v3guw_di" bpmnElement="Flow_17v3guw">
        <di:waypoint x="1215" y="525" />
        <di:waypoint x="1215" y="800" />
        <di:waypoint x="435" y="800" />
        <di:waypoint x="435" y="770" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="815" y="782" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0r7c10e_di" bpmnElement="Flow_0r7c10e">
        <di:waypoint x="1545" y="540" />
        <di:waypoint x="1545" y="730" />
        <di:waypoint x="1640" y="730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_175mvjm_di" bpmnElement="Flow_175mvjm">
        <di:waypoint x="825" y="394" />
        <di:waypoint x="955" y="394" />
        <di:waypoint x="955" y="475" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yyerc3_di" bpmnElement="Flow_1yyerc3">
        <di:waypoint x="825" y="500" />
        <di:waypoint x="930" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11hhqwk_di" bpmnElement="Flow_11hhqwk">
        <di:waypoint x="825" y="610" />
        <di:waypoint x="955" y="610" />
        <di:waypoint x="955" y="525" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dghspt_di" bpmnElement="Flow_0dghspt">
        <di:waypoint x="595" y="525" />
        <di:waypoint x="595" y="610" />
        <di:waypoint x="725" y="610" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="634" y="593" width="26" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1oyq1u7_di" bpmnElement="Flow_1oyq1u7">
        <di:waypoint x="595" y="475" />
        <di:waypoint x="595" y="394" />
        <di:waypoint x="725" y="394" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="613" y="373" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1b50max_di" bpmnElement="Flow_1b50max">
        <di:waypoint x="620" y="500" />
        <di:waypoint x="725" y="500" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="637" y="482" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1dimczj_di" bpmnElement="Flow_1dimczj">
        <di:waypoint x="283" y="730" />
        <di:waypoint x="385" y="730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0n1sh5q_di" bpmnElement="Flow_0n1sh5q">
        <di:waypoint x="485" y="730" />
        <di:waypoint x="515" y="730" />
        <di:waypoint x="515" y="500" />
        <di:waypoint x="565" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01nbyc0_di" bpmnElement="Flow_01nbyc0">
        <di:waypoint x="2635" y="334" />
        <di:waypoint x="3215" y="334" />
        <di:waypoint x="3215" y="825" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15lxvrs_di" bpmnElement="Flow_15lxvrs">
        <di:waypoint x="3115" y="520" />
        <di:waypoint x="3145" y="520" />
        <di:waypoint x="3145" y="850" />
        <di:waypoint x="3190" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qsrhx6_di" bpmnElement="Flow_1qsrhx6">
        <di:waypoint x="3240" y="850" />
        <di:waypoint x="3327" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0cb9vyn_di" bpmnElement="Flow_0cb9vyn">
        <di:waypoint x="2045" y="505" />
        <di:waypoint x="2045" y="850" />
        <di:waypoint x="2095" y="850" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2055" y="526" width="39" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_16o4913_di" bpmnElement="Flow_16o4913">
        <di:waypoint x="2045" y="455" />
        <di:waypoint x="2045" y="334" />
        <di:waypoint x="2535" y="334" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2200" y="347" width="51" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08nkpzh_di" bpmnElement="Flow_08nkpzh">
        <di:waypoint x="2195" y="850" />
        <di:waypoint x="2245" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03c1k8r_di" bpmnElement="Flow_03c1k8r">
        <di:waypoint x="2165" y="908" />
        <di:waypoint x="2165" y="950" />
        <di:waypoint x="2267" y="950" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1w2zpnv_di" bpmnElement="Flow_1w2zpnv">
        <di:waypoint x="2635" y="600" />
        <di:waypoint x="2725" y="600" />
        <di:waypoint x="2725" y="545" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rsacmn_di" bpmnElement="Flow_1rsacmn">
        <di:waypoint x="2635" y="440" />
        <di:waypoint x="2725" y="440" />
        <di:waypoint x="2725" y="495" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0lkkwra_di" bpmnElement="Flow_0lkkwra">
        <di:waypoint x="2750" y="520" />
        <di:waypoint x="2775" y="520" />
        <di:waypoint x="2775" y="850" />
        <di:waypoint x="2825" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_015vqai_di" bpmnElement="Flow_015vqai">
        <di:waypoint x="2345" y="850" />
        <di:waypoint x="2385" y="850" />
        <di:waypoint x="2385" y="520" />
        <di:waypoint x="2410" y="520" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1dtqh8j_di" bpmnElement="Flow_1dtqh8j">
        <di:waypoint x="2435" y="545" />
        <di:waypoint x="2435" y="600" />
        <di:waypoint x="2535" y="600" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2442" y="603" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0olu7ki_di" bpmnElement="Flow_0olu7ki">
        <di:waypoint x="2435" y="495" />
        <di:waypoint x="2435" y="440" />
        <di:waypoint x="2535" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2433" y="422" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tc93vx_di" bpmnElement="Flow_1tc93vx">
        <di:waypoint x="2925" y="850" />
        <di:waypoint x="2975" y="850" />
        <di:waypoint x="2975" y="520" />
        <di:waypoint x="3015" y="520" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nc2a0n_di" bpmnElement="Flow_1nc2a0n">
        <di:waypoint x="3363" y="850" />
        <di:waypoint x="3465" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_133e066_di" bpmnElement="Flow_133e066">
        <di:waypoint x="1910" y="730" />
        <di:waypoint x="1950" y="730" />
        <di:waypoint x="1950" y="480" />
        <di:waypoint x="2020" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Activity_01fl3cl_di" bpmnElement="Activity_01fl3cl">
        <dc:Bounds x="385" y="690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0uux4c6_di" bpmnElement="Event_0sfdkmy">
        <dc:Bounds x="247" y="712" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="222" y="755" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1sbh7j6_di" bpmnElement="Gateway_1sbh7j6" isMarkerVisible="true">
        <dc:Bounds x="570" y="475" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0jqy6a2_di" bpmnElement="checkSingle">
        <dc:Bounds x="725" y="354" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1tn8c6u_di" bpmnElement="checkDouble">
        <dc:Bounds x="725" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0yev30b_di" bpmnElement="checkSuite">
        <dc:Bounds x="725" y="570" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0hxevlc_di" bpmnElement="Gateway_0hxevlc" isMarkerVisible="true">
        <dc:Bounds x="930" y="475" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0vb6k4w_di" bpmnElement="Gateway_0vb6k4w" isMarkerVisible="true">
        <dc:Bounds x="1190" y="475" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1179" y="445" width="74" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19yvpt0_di" bpmnElement="zimmerVorschlagen">
        <dc:Bounds x="1045" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19j48au_di" bpmnElement="zimmerEintragen">
        <dc:Bounds x="1325" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1i08km0_di" bpmnElement="zimmerBuchen">
        <dc:Bounds x="1495" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1imzwfz_di" bpmnElement="Gateway_1imzwfz" isMarkerVisible="true">
        <dc:Bounds x="3190" y="825" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1d0q11l_di" bpmnElement="Gateway_1d0q11l" isMarkerVisible="true">
        <dc:Bounds x="2020" y="455" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="boniPruefen_di" bpmnElement="boniPruefen">
        <dc:Bounds x="2095" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1mg1ygy_di" bpmnElement="Event_1mg1ygy">
        <dc:Bounds x="2267" y="932" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2322" y="936" width="65" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1gpz2j8_di" bpmnElement="Gateway_1gpz2j8" isMarkerVisible="true">
        <dc:Bounds x="2700" y="495" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0oi01fx_di" bpmnElement="Gateway_0oi01fx" isMarkerVisible="true">
        <dc:Bounds x="2410" y="495" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="modalVorschlagen_di" bpmnElement="modalVorschlagen">
        <dc:Bounds x="2245" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="kondi3Monate_di" bpmnElement="kondi3Monate">
        <dc:Bounds x="2535" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="kondi6Monate_di" bpmnElement="kondi6Monate">
        <dc:Bounds x="2535" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19qco6d_di" bpmnElement="Activity_19qco6d">
        <dc:Bounds x="2825" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0hbkwwd_di" bpmnElement="Event_0hbkwwd">
        <dc:Bounds x="3327" y="832" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3313" y="875" width="64" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0cj9elw_di" bpmnElement="Activity_0cj9elw">
        <dc:Bounds x="3465" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1qbv6rm_di" bpmnElement="Activity_1qbv6rm">
        <dc:Bounds x="2535" y="294" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ibrc83_di" bpmnElement="Activity_1ibrc83">
        <dc:Bounds x="3015" y="480" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_17dy2of_di" bpmnElement="buchungAnzeigen">
        <dc:Bounds x="1640" y="690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="zahlungsartWaehlen_di" bpmnElement="zahlungsartWaehlen">
        <dc:Bounds x="1810" y="690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_1596pi2_di" bpmnElement="Association_1596pi2">
        <di:waypoint x="2562" y="640" />
        <di:waypoint x="2534" y="690" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_17w1wpw_di" bpmnElement="Association_17w1wpw">
        <di:waypoint x="3095" y="480" />
        <di:waypoint x="3126" y="437" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_1ny3o93_di" bpmnElement="Association_1ny3o93">
        <di:waypoint x="818" y="355" />
        <di:waypoint x="845" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_1g4loql_di" bpmnElement="Association_1g4loql">
        <di:waypoint x="2304" y="1020" />
        <di:waypoint x="2178" y="902" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_13viwg1_di" bpmnElement="Event_13viwg1">
        <dc:Bounds x="2147" y="872" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2178" y="933" width="53" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_03ohyty_di" bpmnElement="Flow_03ohyty">
        <di:waypoint x="435" y="690" />
        <di:waypoint x="435" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0148uu4_di" bpmnElement="Flow_0148uu4">
        <di:waypoint x="265" y="140" />
        <di:waypoint x="265" y="712" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1juqhcc_di" bpmnElement="Flow_1juqhcc">
        <di:waypoint x="1095" y="460" />
        <di:waypoint x="1095" y="140" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
